┌────────────────────────────────────────────┐
│ Step 1: Load raw gyro samples              │
│                                            │
│ Input JSON:                                │
│  - sensor timestamp (ns)                   │
│  - x, y, z angular velocity                │
│                                            │
│ Output:                                    │
│  RawSample(timestamp, x, y, z)             │
└───────────────────────┬────────────────────┘
                        ↓
┌────────────────────────────────────────────┐
│ Step 2: Time normalization (analysis)      │
│                                            │
│ t[i] = i (sample index)                    │
│                                            │
│ Purpose:                                   │
│  - stable visualization axis               │
│  - no floating-point drift                  │
│  - easy UI mapping                         │
│                                            │
│ NOTE: seconds = t / fs (UI-level)          │
└───────────────────────┬────────────────────┘
                        ↓
┌────────────────────────────────────────────┐
│ Step 3: Axis separation                    │
│                                            │
│ gx = [x0, x1, x2, ...]                     │
│ gy = [y0, y1, y2, ...]                     │
│ gz = [z0, z1, z2, ...]                     │
│                                            │
│ Matches SciPy array input                  │
└───────────────────────┬────────────────────┘
                        ↓
┌────────────────────────────────────────────┐
│ Step 4: Butterworth High-Pass Design       │
│                                            │
│ Parameters:                                │
│  - type     = high-pass                    │
│  - cutoffHz = 0.3                          │
│  - fsHz     = 50                           │
│  - order    = 2                            │
│                                            │
│ SciPy equivalent:                          │
│  butter(order, Wn, btype='high',           │
│         output='sos')                      │
└───────────────────────┬────────────────────┘
                        ↓
┌────────────────────────────────────────────┐
│ Step 5: SOS cascade filtering               │
│                                            │
│ Each axis processed independently          │
│                                            │
│ Direct Form II Transposed                  │
│                                            │
│ Ensures numerical stability                │
└───────────────────────┬────────────────────┘
                        ↓
┌────────────────────────────────────────────┐
│ Step 6: Zero-phase filtering (filtfilt)       │
│                                            │
│ Forward pass                               │
│ Reverse signal                             │
│ Backward pass                              │
│ Reverse back                               │
│                                            │
│ Effect:                                    │
│  - zero phase distortion                   │
│  - effective order = 4                     │
└───────────────────────┬────────────────────┘
                        ↓
┌────────────────────────────────────────────┐
│ Step 7: Magnitude computation              │
│                                            │
│ |ω| = sqrt(gx² + gy² + gz²)                │
│                                            │
│ Direction-independent rotation intensity   │
└───────────────────────┬────────────────────┘
                        ↓
┌────────────────────────────────────────────┐
│ Step 8: Output GyroAnalysisResult          │
│                                            │
│  - t (sample index)                        │
│  - filtered gx, gy, gz                      │
│  - magnitude                               │
│                                            │
│ UI-ready, session-level data               │
└────────────────────────────────────────────┘
